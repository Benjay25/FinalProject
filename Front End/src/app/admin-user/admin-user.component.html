<div><form [formGroup]="emailForm" *ngIf="emailForm && arrUsers">
    <table class="table table-dark">
        <thead>
            <tr class="text-success">
                <th scope="col">ID</th>
                <th scope="col">Forename(s)</th>
                <th scope="col">Surname</th>
                <th scope="col">Email</th>
                <th scope="col">Locked</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr  *ngFor="let user of arrUsers; let i=index">
                <th scope="row">{{ user.id }}</th>
                <td>{{ user.firstName }}</td>
                <td>{{ user.lastName }}</td>
                <td>{{ user.email }}</td>
                <td>
                    <button type="button" (click)="lock(user.id)" *ngIf="!user.locked" class="btn btn-outline-success btn-md">Lock</button>
                    <svg *ngIf="user.locked" width="1.5em" height="1.5em" style="color: #239c33;" viewBox="0 0 16 16" class="bi bi-lock-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/><path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/></svg></td>
                <td>
                    <div formArrayName='emails'>
                        <div [formGroupName]="i" class="dropdown" style="margin-top: 10%;" >
                            <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Action
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="background: #34343d;">
                                <a class="dropdown-item" (click)="unlock(user.id)" *ngIf="user.locked" style="font-weight: bold; color: #239c33;">Unlock</a>
                                <div class="form group" style="font-weight: bold; color: #239c33; margin-left: 10%;">
                                    <div style="margin-bottom: 3px;">Change Email</div>
                                    <div>
                                        <input type="text" placeholder="enter new email" style="height: 35px;" formControlName="email" name="email">
                                        <button [disabled]="!emailForm.valid" class="btn btn-success btn-md" (click)="submit(user, i)" type="button">Save</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</form></div>